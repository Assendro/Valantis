{"ast":null,"code":"import React from\"react\";import Request from\"./Request\";import filterDuplicates from\"./FilterDuplicates\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";class Input extends React.Component{constructor(props){super(props);this.changeState=event=>{console.log(event.target.value);switch(event.target.className){case\"input-name\":if(event.target.value.length>0){this.setState({name:event.target.value});}else{this.setState({name:null});}break;case\"input-price\":this.setState({price:+event.target.value});break;case\"input-brand\":if(event.target.value=='Бренд'){this.setState({brand:null});}else{this.setState({brand:event.target.value});}break;default:break;}};this.state={name:null,price:null,brand:null,brandNames:[],error:null,isLoaded:null};this.handleChange=this.handleChange.bind(this);}async handleChange(){if(this.state.name||this.state.price||this.state.brand){this.props.changeParentValue({name:this.state.name,price:this.state.price,brand:this.state.brand,page:0,filterEnabled:true});}else{this.props.changeParentValue({name:null,price:null,brand:null,page:0,filterEnabled:false});}}takeBrands(){let body={field:'brand',offset:0};return Request('get_fields',body).then(res=>{res=filterDuplicates(res);res.splice(0,1);this.setState({brandNames:res,isLoaded:true});},e=>{console.log(\"ошибка в get_fields\");return this.takeBrands();});}componentDidMount(){}componentWillUnmount(){this.takeBrands();}render(){const{brandNames,error,isLoaded}=this.state;if(error&&!error.name=='Server Error'&&!error.name=='Authorization Error'){console.log(error);return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \",error]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-name\",type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",onChange:this.changeState}),/*#__PURE__*/_jsx(\"input\",{className:\"input-price\",type:\"number\",placeholder:\"\\u0426\\u0435\\u043D\\u0430\",onChange:this.changeState}),/*#__PURE__*/_jsxs(\"select\",{className:\"input-brand\",type:\"text\",onChange:this.changeState,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0411\\u0440\\u0435\\u043D\\u0434\",children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"},3),brandNames.map(item=>{return/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item);})]}),/*#__PURE__*/_jsx(\"button\",{className:\"input-button\",onClick:this.handleChange,children:\"\\u041D\\u0430\\u0439\\u0442\\u0438\"})]});}}}export default Input;","map":{"version":3,"names":["React","Request","filterDuplicates","jsxs","_jsxs","jsx","_jsx","Input","Component","constructor","props","changeState","event","console","log","target","value","className","length","setState","name","price","brand","state","brandNames","error","isLoaded","handleChange","bind","changeParentValue","page","filterEnabled","takeBrands","body","field","offset","then","res","splice","e","componentDidMount","componentWillUnmount","render","children","type","placeholder","onChange","map","item","onClick"],"sources":["C:/Users/kiril/Desktop/Практика/test-task-valantis/src/components/Input.jsx"],"sourcesContent":["import React from \"react\"\r\nimport Request from \"./Request\"\r\nimport filterDuplicates from \"./FilterDuplicates\"\r\n\r\nclass Input extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      name: null, \r\n      price: null, \r\n      brand: null,\r\n      brandNames: [],\r\n      error: null,\r\n      isLoaded: null\r\n    }\r\n    this.handleChange = this.handleChange.bind(this)\r\n  }\r\n  changeState = (event) => {\r\n    console.log(event.target.value)\r\n\r\n    switch (event.target.className) {\r\n      case \"input-name\":\r\n        if (event.target.value.length > 0) {\r\n          this.setState({\r\n            name: event.target.value\r\n          })\r\n        } else {\r\n          this.setState({\r\n            name: null\r\n          })\r\n        }\r\n        break;\r\n      case \"input-price\":\r\n        this.setState({\r\n          price: +event.target.value\r\n        })\r\n        break;\r\n      case \"input-brand\":\r\n        if (event.target.value == 'Бренд') {\r\n          this.setState({\r\n            brand: null\r\n          })\r\n        } else {\r\n          this.setState({\r\n            brand: event.target.value\r\n          })\r\n        }\r\n        break;\r\n    \r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  async handleChange() {\r\n    if (this.state.name || this.state.price || this.state.brand) {\r\n      this.props.changeParentValue({name: this.state.name, price: this.state.price, brand: this.state.brand, page: 0, filterEnabled: true})\r\n    } else {\r\n      this.props.changeParentValue({name: null, price: null, brand: null, page: 0, filterEnabled: false})\r\n    }\r\n\r\n  }\r\n  takeBrands() {\r\n    let body = {\r\n      field: 'brand',\r\n      offset: 0\r\n    }\r\n    return Request('get_fields', body)\r\n      .then((res) => {\r\n        res = filterDuplicates(res)\r\n        res.splice(0, 1)\r\n        this.setState({\r\n          brandNames: res,\r\n          isLoaded: true\r\n        }) \r\n      }, (e) => {\r\n        console.log(\"ошибка в get_fields\")\r\n        return this.takeBrands()\r\n      })\r\n\r\n  } \r\n  componentDidMount() {\r\n  }\r\n  componentWillUnmount() { \r\n    this.takeBrands()   \r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const {brandNames, error, isLoaded} = this.state\r\n    if (error && !error.name == 'Server Error' && !error.name == 'Authorization Error' ) {\r\n      console.log(error)\r\n      return <div className=\"\">Ошибка {error}</div>\r\n    } else if (!isLoaded) {\r\n      return <div className=\"loading\">Загрузка...</div>\r\n    } else  {\r\n      return (\r\n        <div className=\"input-container\">\r\n          <input className=\"input-name\" type=\"text\" placeholder=\"Название\" onChange={this.changeState}/>\r\n          <input className=\"input-price\" type=\"number\" placeholder=\"Цена\" onChange={this.changeState} />\r\n          <select  className=\"input-brand\" type=\"text\" onChange={this.changeState}>\r\n            <option key={3} value=\"Бренд\">Бренд</option>\r\n            {brandNames.map((item) => {\r\n              return <option key={item} value={item}>{item}</option>\r\n            })\r\n            }\r\n          </select>\r\n          <button className=\"input-button\" onClick={this.handleChange}>Найти</button>\r\n        </div>\r\n      )\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default Input"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}