{"ast":null,"code":"import React from \"react\";\nimport Key from \"./Key\";\nimport ServerError from \"./ServerError\";\nimport AuthorizationError from \"./AuthorizationError\";\nfunction Request(action, params) {\n  const body = {\n    action: action,\n    params: params\n  };\n  fetch('https://api.valantis.store:41000/', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8',\n      'X-Auth': Key()\n    },\n    body: JSON.stringify(body)\n  }).then(res => {\n    //обрабатываем ответ сервера (не ошибка для then)\n    if (!res.ok) {\n      switch (res.status) {\n        case 500:\n          console.log(`Ошибка запроса id товаров. Код: ${res.status}`);\n          throw new ServerError();\n          break;\n        case 401:\n          console.log(`Ошибка запроса id товаров. Код: ${res.status}`);\n          throw new AuthorizationError();\n          break;\n        default:\n          break;\n      }\n    } else {\n      return res;\n    }\n  }, e => {\n    throw e;\n  }).then(res => {\n    //приводим строку ответа к объекту \n    return res.json();\n  }, e => {\n    throw e;\n  });\n  return response;\n}\n_c = Request;\nexport default Request;\nvar _c;\n$RefreshReg$(_c, \"Request\");","map":{"version":3,"names":["React","Key","ServerError","AuthorizationError","Request","action","params","body","fetch","method","headers","JSON","stringify","then","res","ok","status","console","log","e","json","response","_c","$RefreshReg$"],"sources":["C:/Users/kiril/Desktop/Практика/test-task-valantis/src/components/Request.jsx"],"sourcesContent":["import React from \"react\"\r\nimport Key from \"./Key\";\r\nimport ServerError from \"./ServerError\";\r\nimport AuthorizationError from \"./AuthorizationError\";\r\n\r\nfunction Request(action, params) {\r\n  const body = {\r\n    action: action, \r\n    params: params\r\n  }\r\n  fetch('https://api.valantis.store:41000/',\r\n    { method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json;charset=utf-8',\r\n      'X-Auth': Key()\r\n    },\r\n    body: JSON.stringify(body)\r\n    }\r\n  ).then((res) => { //обрабатываем ответ сервера (не ошибка для then)\r\n    if(!res.ok) {\r\n      switch (res.status) {\r\n        case 500:\r\n          console.log(`Ошибка запроса id товаров. Код: ${res.status}`)\r\n          throw new ServerError\r\n          break;\r\n        case 401:\r\n          console.log(`Ошибка запроса id товаров. Код: ${res.status}`)\r\n          throw new AuthorizationError\r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      return res\r\n    }\r\n  }, (e) => { throw e }).then((res) => { //приводим строку ответа к объекту \r\n    return res.json() \r\n  }, (e) => { throw e; })\r\n\r\n\r\n  return response\r\n}\r\n\r\n\r\nexport default Request"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,OAAO;AACvB,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,kBAAkB,MAAM,sBAAsB;AAErD,SAASC,OAAOA,CAACC,MAAM,EAAEC,MAAM,EAAE;EAC/B,MAAMC,IAAI,GAAG;IACXF,MAAM,EAAEA,MAAM;IACdC,MAAM,EAAEA;EACV,CAAC;EACDE,KAAK,CAAC,mCAAmC,EACvC;IAAEC,MAAM,EAAE,MAAM;IAChBC,OAAO,EAAE;MACP,cAAc,EAAE,gCAAgC;MAChD,QAAQ,EAAET,GAAG,CAAC;IAChB,CAAC;IACDM,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACL,IAAI;EACzB,CACF,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAK;IAAE;IAChB,IAAG,CAACA,GAAG,CAACC,EAAE,EAAE;MACV,QAAQD,GAAG,CAACE,MAAM;QAChB,KAAK,GAAG;UACNC,OAAO,CAACC,GAAG,CAAE,mCAAkCJ,GAAG,CAACE,MAAO,EAAC,CAAC;UAC5D,MAAM,IAAId,WAAW,CAAD,CAAC;UACrB;QACF,KAAK,GAAG;UACNe,OAAO,CAACC,GAAG,CAAE,mCAAkCJ,GAAG,CAACE,MAAO,EAAC,CAAC;UAC5D,MAAM,IAAIb,kBAAkB,CAAD,CAAC;UAC5B;QAEF;UACE;MACJ;IACF,CAAC,MAAM;MACL,OAAOW,GAAG;IACZ;EACF,CAAC,EAAGK,CAAC,IAAK;IAAE,MAAMA,CAAC;EAAC,CAAC,CAAC,CAACN,IAAI,CAAEC,GAAG,IAAK;IAAE;IACrC,OAAOA,GAAG,CAACM,IAAI,CAAC,CAAC;EACnB,CAAC,EAAGD,CAAC,IAAK;IAAE,MAAMA,CAAC;EAAE,CAAC,CAAC;EAGvB,OAAOE,QAAQ;AACjB;AAACC,EAAA,GArCQlB,OAAO;AAwChB,eAAeA,OAAO;AAAA,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}